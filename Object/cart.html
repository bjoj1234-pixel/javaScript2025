<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>장바구니 구현</title>
    <style>
        body{
            font-family: sans-serif;
            margin: 30px;
            background: #9f9f9f;
        }
        h2{
            text-align: center;
            margin-bottom: 20px;
        }
        table{
            width: 700px;
            margin: 0 auto;
            border-collapse: collapse;
            background: #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        th,td{
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #ddd;
        }
        th{
            background-color: #4caf50;
            color: white;
        }
        button{
            margin: 20px;
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .plus{
            background-color: #4caf50;
            color: white;
        }
        .minus{
            background-color: #f39c12;
            color: white;
        }
        .remove{
            background-color: #e74c3c;
            color: white;
        }
    </style>
</head>
<body>
    <h2>장바구니</h2>
    <table id="cartTable">
        <thead>
            <tr>
                <th>상품명</th>
                <th>가격</th>
                <th>수량</th>
                <th>합계</th>
                <th>조작</th>
            </tr>
        </thead>
        <tbody id="cartBody"></tbody>
    </table>
    <div id="total">총 금액: 0원</div>

    <script>
        // 장바구니 구현 데이터
        let cart = [
            {id:1,name:'노트북',price:1000000,quantity:1},
            {id:2,name:'마우스',price:20000,quantity:2},
            {id:3,name:'키보드',price:50000,quantity:1},
        ];       

        // 장바구니 cartBody 들어가는 테이블을 구현
        // function renderCart(){}로 작성
        // function 선언만으로는 어떤사건도 발생하지않음
        function renderCart(){
            let cartBody = document.getElementById('cartBody');
            let result = '';

            for(let i=0;i<cart.length;i++){
                // cart배열 오브젝트의 각 항목을 테이블의 <tr>~</tr>로 삽입
                result += `<tr>
                    <td>${cart[i].name}</td>
                    <td>${cart[i].price.toLocaleString('ko-kr')}원</td>
                    <td>${cart[i].quantity}</td>
                    <td>${(cart[i].price * cart[i].quantity).toLocaleString('ko-kr')}원</td>
                    <td>         
                        <button type='button' class='plus' onclick='increase(${i})'>+</button>
                        <button type='button' class='minus' onclick='decrease(${i})'>-</button>
                        <button type='button' class='remove' onclick='remove(${i})'>x</button>                        
                    </td>
                </tr>`;//i=0일때 첫번째 행 버튼 클릭
                    //function increase(0) => 매개변수 함수
            }
            cartBody.innerHTML = result;
        }
        //function 호출 : 사건발생
        renderCart();

        
        // plus 버튼 기능
        // 매개변수를 지정한 함수는 반드시
        // 함수 작성 시 매개변수 지정해야 함
        // 함수 매개변수 이름은 개발자가 작성
        function increase(indexNum){
            
            //수량 증가는 10이되면 더이상 불가
            if(cart[indexNum].quantity >= 10){
                alert('수량은 10개 까지만 가능합니다.');
            }else{
                cart[indexNum].quantity++;//10이하면 수량증가
            }
            renderCart(); //수량 html화면표시를 위해 다시 호출
        } 

        //minus 버튼 기능
        function decrease(indexNum){

            if(cart[indexNum].quantity <= 1){
                alert('수량은 최소 1개 이상부터 가능합니다.');
            }else{
                cart[indexNum].quantity--;//2부터는 수량감소
            }
            renderCart(); //수량 html화면표시를 위해 다시 호출
        }

        //remove 버튼 기능
        //배열이름.splice('시작할 인덱스번호, 제거할 요소의 개수') 메서드 이용하여 삭제
        //메모리의 중요성 => 메모리 데이터가 쌓이면 속도가 느려져
        //코드를 짜서 실행하면 => 연산 => 메모리의 제어장치로 이동
        //splice() => 내장함수 => 불러와서 사용하고
        function remove(indexNum){
            cart.splice(indexNum,1);
            renderCart();
        }
    </script>
</body>
</html>